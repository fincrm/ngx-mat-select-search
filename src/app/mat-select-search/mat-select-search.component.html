<!--
Copyright (c) 2018 Bithost GmbH All Rights Reserved.

Use of this source code is governed by an MIT-style license that can be
found in the LICENSE file at https://angular.io/license

Note: the  mat-datepicker-content mat-tab-header are needed to inherit the material theme colors, see PR #22
-->

<div
  #innerSelectSearch
  [ngClass]="{
    'mat-select-search-inner-multiple': matSelect.multiple,
    'mat-select-search-inner-toggle-all': _isToggleAllCheckboxVisible()
  }"
  class="mat-select-search-inner mat-typography mat-datepicker-content mat-tab-header"
>
  <div class="mat-select-search-inner-row">
    <mat-checkbox
      (change)="_emitSelectAllBooleanToParent($event.checked)"
      *ngIf="_isToggleAllCheckboxVisible()"
      [checked]="toggleAllCheckboxChecked"
      [color]="matFormField?.color"
      [indeterminate]="toggleAllCheckboxIndeterminate"
      [matTooltipPosition]="toggleAllCheckboxTooltipPosition"
      [matTooltip]="toggleAllCheckboxTooltipMessage"
      class="mat-select-search-toggle-all-checkbox"
      matTooltipClass="ngx-mat-select-search-toggle-all-tooltip"
    ></mat-checkbox>

    <input
      #searchSelectInput
      (blur)="onBlur()"
      (keydown)="_handleKeydown($event)"
      (keyup)="_handleKeyup($event)"
      [attr.aria-label]="ariaLabel"
      [autocomplete]="autocomplete"
      [formControl]="_formControl"
      [placeholder]="placeholderLabel"
      [type]="type"
      class="mat-select-search-input"
    />
    <mat-spinner *ngIf="searching" class="mat-select-search-spinner" diameter="20"></mat-spinner>

    <button
      (click)="_reset(true)"
      *ngIf="!hideClearSearchButton && value && !searching"
      aria-label="Clear"
      class="mat-select-search-clear"
      mat-icon-button
    >
      <ng-content *ngIf="clearIcon; else defaultIcon" select="[ngxMatSelectSearchClear]"></ng-content>
      <ng-template #defaultIcon>
        <mat-icon [svgIcon]="closeSvgIcon">
          {{ !closeSvgIcon ? closeIcon : null }}
        </mat-icon>
      </ng-template>
    </button>

    <ng-content select=".mat-select-search-custom-header-content"></ng-content>
  </div>

  <mat-divider></mat-divider>
</div>

<div *ngIf="_showNoEntriesFound$ | async" class="mat-select-search-no-entries-found">
  <ng-content
    *ngIf="noEntriesFound; else defaultNoEntriesFound"
    select="[ngxMatSelectNoEntriesFound]"
  ></ng-content>
  <ng-template #defaultNoEntriesFound>{{ noEntriesFoundLabel }}</ng-template>
</div>
